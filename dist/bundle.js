(()=>{const e="58e7442ffaa214b3f68abc62829e8fcb",t=document.getElementById("city-input"),n=document.getElementById("search-btn"),i=document.getElementById("toggle-view"),a=document.getElementById("weather-result"),c=document.getElementById("city-name"),d=document.getElementById("error-message");let o=!1;async function s(t){try{d.classList.add("hidden"),a.classList.add("hidden"),c.textContent=t,o?await async function(t){try{const n=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${encodeURIComponent(t)}&appid=${e}&units=metric`);if(!n.ok)throw new Error("City not found");const i=await n.json(),c=document.createElement("div");c.className="forecast-container";const d={};i.list.forEach((e=>{const t=new Date(1e3*e.dt).toLocaleDateString("en-US",{weekday:"short"});d[t]?(d[t].temp+=e.main.temp,d[t].humidity+=e.main.humidity,d[t].wind+=e.wind.speed,d[t].count++):d[t]={temp:e.main.temp,description:e.weather[0].description,icon:e.weather[0].icon,humidity:e.main.humidity,wind:e.wind.speed,count:1}})),Object.entries(d).forEach((([e,t])=>{const n=Math.round(t.temp/t.count),i=Math.round(t.humidity/t.count),a=(t.wind/t.count).toFixed(1),d=document.createElement("div");d.className="forecast-card",d.innerHTML=`\n                <h3>${e}</h3>\n                <img src="https://openweathermap.org/img/wn/${t.icon}@2x.png" alt="${t.description}">\n                <p class="temp">${n}°C</p>\n                <p class="desc">${t.description}</p>\n                <div class="weather-details">\n                    <p>Humidity: ${i}%</p>\n                    <p>Wind: ${a} m/s</p>\n                </div>\n            `,c.appendChild(d)})),a.innerHTML="",a.appendChild(c)}catch(e){throw e}}(t):await async function(t){try{const n=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(t)}&appid=${e}&units=metric`);if(!n.ok)throw new Error("City not found");const i=await n.json(),c=document.createElement("div");c.className="weather-card",c.innerHTML=`\n            <img src="https://openweathermap.org/img/wn/${i.weather[0].icon}@2x.png" alt="${i.weather[0].description}">\n            <h2>${Math.round(i.main.temp)}°C</h2>\n            <p class="desc">${i.weather[0].description}</p>\n            <div class="weather-details">\n                <p>Humidity: ${i.main.humidity}%</p>\n                <p>Wind: ${i.wind.speed} m/s</p>\n            </div>\n        `,a.innerHTML="",a.appendChild(c)}catch(e){throw e}}(t),a.classList.remove("hidden")}catch(e){d.textContent=e.message,d.classList.remove("hidden")}}i.addEventListener("click",(()=>{o=!o,i.textContent=o?"Show Current Weather":"Show 7-Day Forecast",t.value.trim()&&s(t.value.trim())})),n.addEventListener("click",(()=>{const e=t.value.trim();e&&s(e)})),t.addEventListener("keyup",(e=>{"Enter"===e.key&&n.click()}))})();